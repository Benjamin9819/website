---
title: "SQL"
output: html_document
---

## Filtering Columns and Rows

With SQL, you can filter columns and rows by using SELECT and WHERE. Let's look at an exmaple using the Lahman database. So we should first load that database, along with the package sqldf.

```{r message=FALSE, warning=FALSE}
library(Lahman)
library(sqldf)
```

Suppose now I would like to see the homerun totals for the 1927 Yankees. I could just as easily writing the following: 
```{r}
query<-"select playerID, yearID, teamID, HR FROM Batting
WHERE teamID='NYA' and yearID=1927"
sqldf(query)
```

Let's look at another example. Let's say I want all instances where the Yankees hit 40 homeruns or more. That would look like this:
```{r}
query<-"select playerID, yearID, teamID, HR FROM Batting
WHERE teamID='NYA' and HR>=40"
sqldf(query)
```

Let's look at example with more than one constraint. Suppose we want more than 40 homeruns, but less than 60 strikeouts:
```{r} 
query<-"select playerID, yearID, teamID, HR, SO FROM Batting
WHERE HR>40 and SO<60"
sqldf(query)
```

For a final test, let's add two constraints to the same category. Let's discriminate Phillies with more than 30 Homeruns during the 1970s.
```{r}
query<-"select playerID, yearID, teamID, HR FROM Batting
WHERE teamID='PHI' AND HR>30 and yearID>1969 and yearID<1980"
sqldf(query)
```

## ORDER BY
Here's an example of ordering, where we order the rows by a different constraint other than chronological.
```{r}
query<- "SELECT playerID, teamID, yearID, HR FROM Batting
WHERE HR>50
ORDER BY HR DESC"
sqldf(query)
```

Here's an exmaple with two constraints, strikeouts and the number of at bats:
```{r}
query<-"select playerID, yearID, teamID, AB, SO FROM Batting
WHERE SO<10 and AB>=400
ORDER BY SO"
sqldf(query)
```


## AGGREGATION


```{r}

```

## JOINS